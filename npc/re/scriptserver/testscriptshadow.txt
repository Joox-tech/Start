brasilis,175,125,8	script	ออฟคอสชาโด้ว	4_M_SIT_NOVICE,{

disable_items;
	set Rup, callfunc("F_Rand",29062,29063,29121,29122,29123,29124,29125,29126,29146,29120,29110,29100,29090,29070,290804700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4825,4826,4827,4828,4829,4830,4831,4832,4833,4834,4835,4836,4837,4838,4839,4840,4841,4842,4843,4844,4845,4846,4847,4848,4849,4850,4851,4852,4853,4854,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4875,4876,4877,4878,4879,4880,4881,4882,4883,4884,4885,4886,4887,4888,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900,4902,4903,4904,4905,4906,4907,4908,4909,4910,4911,4912,4913,4914,4915,4916,4917,4918,4919,4920,4921,4922,4923,4924,4925,4926,4927,4928,4929,4930,4931,4932,4933,4934,4935,4936,4937,4938,4939,4940,4941,4942,4943,4944,4945,4946,4947,4948,4949,4950,4951,4952,4953,4954,4955,4956,4957,4958,4959,4960,4961,4962,4963,4964,4965,4966,4967,4968,4969,4970,4971,4972,4973,4974,4975,4976,4977,4978,4979,4980,4981,4982,4983,4984,4985,4986,4987,4988,4989,4990,4991,4992,4993,4994,4995,4996,4997,4998,4999,6716,6717,6718,6740,6741,6742,6743,6744,6745,6790,6791,6792,6908,6943,6944,6945,6946,6947,6948,6949,6950,6951,25670,25671,25672,25673,25674,25675,25676,25677,25678,25679,25680,25681,25682,25683,25684,25685,25686,25687,25688,25689,25690,25691,25692,25693,25694,25695,25696,25697,25698,25699,25700,25701,25702,25703,25704,25705,29000,29001,29002,29003,29004,29005,29006,29007,29008,29009,29010,29011,29061,29062,29063,29064,29065,29066,29067,29068,29069,29070,29071,29072,29073,29074,29075,29076,29077,29078,29079,29080,29081,29082,29083,29084,29085,29086,29087,29088,29089,29090,29091,29092,29093,29094,29095,29096,29097,29098,29099,29100,29101,29102,29103,29104,29105,29106,29107,29108,29109,29110,29111,29112,29113,29114,29115,29116,29117,29118,29119,29120,29121,29122,29123,29124,29125,29126,29146,29147,29148,29149,29150,29151,29152,29153); 
	set Rmid, callfunc("F_Rand",29121,29122,29123,29124,29125,29126,29120,29110,29100,29090,29080,290704700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4825,4826,4827,4828,4829,4830,4831,4832,4833,4834,4835,4836,4837,4838,4839,4840,4841,4842,4843,4844,4845,4846,4847,4848,4849,4850,4851,4852,4853,4854,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4875,4876,4877,4878,4879,4880,4881,4882,4883,4884,4885,4886,4887,4888,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900,4902,4903,4904,4905,4906,4907,4908,4909,4910,4911,4912,4913,4914,4915,4916,4917,4918,4919,4920,4921,4922,4923,4924,4925,4926,4927,4928,4929,4930,4931,4932,4933,4934,4935,4936,4937,4938,4939,4940,4941,4942,4943,4944,4945,4946,4947,4948,4949,4950,4951,4952,4953,4954,4955,4956,4957,4958,4959,4960,4961,4962,4963,4964,4965,4966,4967,4968,4969,4970,4971,4972,4973,4974,4975,4976,4977,4978,4979,4980,4981,4982,4983,4984,4985,4986,4987,4988,4989,4990,4991,4992,4993,4994,4995,4996,4997,4998,4999,6716,6717,6718,6740,6741,6742,6743,6744,6745,6790,6791,6792,6908,6943,6944,6945,6946,6947,6948,6949,6950,6951,25670,25671,25672,25673,25674,25675,25676,25677,25678,25679,25680,25681,25682,25683,25684,25685,25686,25687,25688,25689,25690,25691,25692,25693,25694,25695,25696,25697,25698,25699,25700,25701,25702,25703,25704,25705,29000,29001,29002,29003,29004,29005,29006,29007,29008,29009,29010,29011,29061,29062,29063,29064,29065,29066,29067,29068,29069,29070,29071,29072,29073,29074,29075,29076,29077,29078,29079,29080,29081,29082,29083,29084,29085,29086,29087,29088,29089,29090,29091,29092,29093,29094,29095,29096,29097,29098,29099,29100,29101,29102,29103,29104,29105,29106,29107,29108,29109,29110,29111,29112,29113,29114,29115,29116,29117,29118,29119,29120,29121,29122,29123,29124,29125,29126,29146,29147,29148,29149,29150,29151,29152,29153);  	
	set Rlow, callfunc("F_Rand",6644,6645,29080,29090,290704700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4825,4826,4827,4828,4829,4830,4831,4832,4833,4834,4835,4836,4837,4838,4839,4840,4841,4842,4843,4844,4845,4846,4847,4848,4849,4850,4851,4852,4853,4854,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4875,4876,4877,4878,4879,4880,4881,4882,4883,4884,4885,4886,4887,4888,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900,4902,4903,4904,4905,4906,4907,4908,4909,4910,4911,4912,4913,4914,4915,4916,4917,4918,4919,4920,4921,4922,4923,4924,4925,4926,4927,4928,4929,4930,4931,4932,4933,4934,4935,4936,4937,4938,4939,4940,4941,4942,4943,4944,4945,4946,4947,4948,4949,4950,4951,4952,4953,4954,4955,4956,4957,4958,4959,4960,4961,4962,4963,4964,4965,4966,4967,4968,4969,4970,4971,4972,4973,4974,4975,4976,4977,4978,4979,4980,4981,4982,4983,4984,4985,4986,4987,4988,4989,4990,4991,4992,4993,4994,4995,4996,4997,4998,4999,6716,6717,6718,6740,6741,6742,6743,6744,6745,6790,6791,6792,6908,6943,6944,6945,6946,6947,6948,6949,6950,6951,25670,25671,25672,25673,25674,25675,25676,25677,25678,25679,25680,25681,25682,25683,25684,25685,25686,25687,25688,25689,25690,25691,25692,25693,25694,25695,25696,25697,25698,25699,25700,25701,25702,25703,25704,25705,29000,29001,29002,29003,29004,29005,29006,29007,29008,29009,29010,29011,29061,29062,29063,29064,29065,29066,29067,29068,29069,29070,29071,29072,29073,29074,29075,29076,29077,29078,29079,29080,29081,29082,29083,29084,29085,29086,29087,29088,29089,29090,29091,29092,29093,29094,29095,29096,29097,29098,29099,29100,29101,29102,29103,29104,29105,29106,29107,29108,29109,29110,29111,29112,29113,29114,29115,29116,29117,29118,29119,29120,29121,29122,29123,29124,29125,29126,29146,29147,29148,29149,29150,29151,29152,29153); 
	set Rwing, callfunc("F_Rand",29062,29063,29121,29122,29123,29124,29125,29126,29146,29120,29110,29100,29090,29070,290804700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4825,4826,4827,4828,4829,4830,4831,4832,4833,4834,4835,4836,4837,4838,4839,4840,4841,4842,4843,4844,4845,4846,4847,4848,4849,4850,4851,4852,4853,4854,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4875,4876,4877,4878,4879,4880,4881,4882,4883,4884,4885,4886,4887,4888,4889,4890,4891,4892,4893,4894,4895,4896,4897,4898,4899,4900,4902,4903,4904,4905,4906,4907,4908,4909,4910,4911,4912,4913,4914,4915,4916,4917,4918,4919,4920,4921,4922,4923,4924,4925,4926,4927,4928,4929,4930,4931,4932,4933,4934,4935,4936,4937,4938,4939,4940,4941,4942,4943,4944,4945,4946,4947,4948,4949,4950,4951,4952,4953,4954,4955,4956,4957,4958,4959,4960,4961,4962,4963,4964,4965,4966,4967,4968,4969,4970,4971,4972,4973,4974,4975,4976,4977,4978,4979,4980,4981,4982,4983,4984,4985,4986,4987,4988,4989,4990,4991,4992,4993,4994,4995,4996,4997,4998,4999,6716,6717,6718,6740,6741,6742,6743,6744,6745,6790,6791,6792,6908,6943,6944,6945,6946,6947,6948,6949,6950,6951,25670,25671,25672,25673,25674,25675,25676,25677,25678,25679,25680,25681,25682,25683,25684,25685,25686,25687,25688,25689,25690,25691,25692,25693,25694,25695,25696,25697,25698,25699,25700,25701,25702,25703,25704,25705,29000,29001,29002,29003,29004,29005,29006,29007,29008,29009,29010,29011,29061,29062,29063,29064,29065,29066,29067,29068,29069,29070,29071,29072,29073,29074,29075,29076,29077,29078,29079,29080,29081,29082,29083,29084,29085,29086,29087,29088,29089,29090,29091,29092,29093,29094,29095,29096,29097,29098,29099,29100,29101,29102,29103,29104,29105,29106,29107,29108,29109,29110,29111,29112,29113,29114,29115,29116,29117,29118,29119,29120,29121,29122,29123,29124,29125,29126,29146,29147,29148,29149,29150,29151,29152,29153);
	
	 			if (checkweight(1201,1) == 0) {
					mes "[Joox]";
					mes "ช่องเก็บของเต็ม";
					close;
				}
				if (MaxWeight - Weight < 10000) {
					mes "[Joox]";
					mes "น้ำหนักเกิน";
					close;
				}
				
					mes "[Joox]";
					mes "เจ้าอยากออฟคอสตูมไหม ?";
	next;
	
	switch(select("^000099ข้าอยากออฟคอสตูม^000000","ข้าขอฟังรายละเอียดก่อน","ยกเลิก")) {
	
case 1:					
					mes "[Joox]";
					mes "ต้องสวมคอสตูมทุกครั้งที่จะออฟ.";
					mes "เลือกคอสตูมที่เจ้าต้องการจะออฟ ?";
                    	
	setarray .@id[1],EQI_SHADOW_ARMOR ,EQI_SHADOW_WEAPON,EQI_SHADOW_SHIELD,EQI_SHADOW_SHOES,EQI_SHADOW_ACC_R,EQI_SHADOW_ACC_L;
		for(set .@i,1; .@i<getarraysize(.@id); set .@i,.@i+1){
			if( getequipisequiped(.@id[.@i]) )
				set .@menu$, .@menu$ + F_getpositionname(.@id[.@i]) + "-[" + getequipname(.@id[.@i]) + "]";
			set .@menu$, .@menu$ + ":";
		}
	set .@id, .@id[ select(.@menu$) ];
	set .@part, getequipid(.@id);
						
// anti-hack
                    				if (callfunc("F_IsEquipIDHack", .@id, .@part))
                    					end;
                    					
                    				if (countitem(.@part) > 1 ) {
                    	next;
                    					mes "[Joox]";
                    					mes "เจ้ามีคอสที่เหมือนกัน.";
                    					mes "ข้าออฟได้ทีละอันเท่านั้น.";
                    					mes "เอาไปเก็บในคลังก่อนแล้วค่อยมาใหม่.";
                    					end;
                    				}
                    	next;
                    					mes "[Joox]";
                    					mes "เจ้าได้เลือกที่จะออฟ ^000099" + getequipname(.@id) + "^000000";
                    
                    			if (.@id == EQI_COSTUME_HEAD_TOP) goto encup;
                    			if (.@id == EQI_COSTUME_HEAD_MID) goto encmid;
                    			if (.@id == EQI_COSTUME_HEAD_LOW) goto enclow;
                    			if (.@id == EQI_COSTUME_GARMENT) goto encwing;
                    					
encup:
                    	@card1 = getequipcardid(.@id,0);
                    	@card2 = getequipcardid(.@id,1);
                    	@card3 = getequipcardid(.@id,2);
                    	@card4 = getequipcardid(.@id,3);
                    	.@ref = getequiprefinerycnt(.@id);
                    			if (Zeny < .cost){ //money check
                    					mes "[Joox]";
                    					mes "เจ้ามีเงินไม่พอ.";
                    					end;
                    				}
                    					mes "[Joox]";
                    					mes "ออฟเลยไหม ?";
                    				if (select( "^000099เอาเลย^000000.", "ยังก่อน." ) == 2) {
                    					mes "[Joox]";
                    					mes "ข้าเชื่อในการตัดสินใจของเจ้า.";
                    					mes "อยากออฟให้มาหาข้าน่ะ.";
                    					end;
                    				}
                    					specialeffect2 EF_REPAIRWEAPON;
                    					progressbar "0x00ff00",2;
                    					set Zeny,Zeny-.cost;
                    				if (rand(100) < .rate) {
                    					specialeffect2 154;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, @card1, Rup, @card3, @card4;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^000099ออฟสำเร็จ^000000.";
                    					end;
                    				}
                    				else {
                    					specialeffect2 155;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, @card1, 0, @card3, @card4;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^009900ออฟไม่สำเร็จ^000000.";
                    					end;
                    				}
                    					
encmid:
                    	@card1 = getequipcardid(.@id,0);
                    	@card2 = getequipcardid(.@id,1);
                    	@card3 = getequipcardid(.@id,2);
                    	@card4 = getequipcardid(.@id,3);					
                    	.@ref = getequiprefinerycnt(.@id);
                    			if (Zeny < .cost){ //money check
                    					mes "[Joox]";
                    					mes "เจ้ามีเงินไม่พอ.";
                    					end;
                    				}
                    					mes "[Joox]";
                    					mes "ออฟเลยไหม ?";
                    				if (select( "^000099เอาเลย^000000.", "ยังก่อน." ) == 2) {
                    					mes "[Joox]";
                    					mes "ข้าเชื่อในการตัดสินใจของเจ้า.";
                    					mes "อยากออฟให้มาหาข้าน่ะ.";
                    					end;
                    				}
                    					specialeffect2 EF_REPAIRWEAPON;
                    					progressbar "0x00ff00",2;
                    					set Zeny,Zeny-.cost;
                    				if (rand(100) < .rate) {
                    					specialeffect2 154;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, Rmid, @card4;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^000099ออฟสำเร็จ^000000.";
                    					end;
                    				}
                    				else {
                    					specialeffect2 155;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, 0, @card4;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^009900ออฟไม่สำเร็จ^000000.";
                    					end;
                    				}
                    			
enclow:
                    	@card1 = getequipcardid(.@id,0);
                    	@card2 = getequipcardid(.@id,1);
                    	@card3 = getequipcardid(.@id,2);
                    	@card4 = getequipcardid(.@id,3);				
                    	.@ref = getequiprefinerycnt(.@id);
                    			if (Zeny < .cost){ //money check
                    					mes "[Joox]";
                    					mes "เจ้ามีเงินไม่พอ.";
                    					end;
                    				}
                    					mes "[Joox]";
                    					mes "ออฟเลยไหม ?";
                    				if (select( "^000099เอาเลย^000000.", "ยังก่อน." ) == 2) {
                    					mes "[Joox]";
                    					mes "ข้าเชื่อในการตัดสินใจของเจ้า.";
                    					mes "อยากออฟให้มาหาข้าน่ะ.";
                    					end;
                    				}
                    					specialeffect2 EF_REPAIRWEAPON;
                    					progressbar "0x00ff00",2;
                    					set Zeny,Zeny-.cost;
                    				if (rand(100) < .rate) {
                    					specialeffect2 154;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, Rlow;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^000099ออฟสำเร็จ^000000.";
                    					end;
                    				}
                    				else {
                    					specialeffect2 155;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, 0;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^009900ออฟไม่สำเร็จ^000000.";
                    					end;
                    				}
                    			
encwing:
                    	@card1 = getequipcardid(.@id,0);
                    	@card2 = getequipcardid(.@id,1);
                    	@card3 = getequipcardid(.@id,2);
                    	@card4 = getequipcardid(.@id,3);					
                    	.@ref = getequiprefinerycnt(.@id);
                    			if (Zeny < .cost){ //money check
                    					mes "[Joox]";
                    					mes "เจ้ามีเงินไม่พอ.";
                    					end;
                    				}
                    					mes "[Joox]";
                    					mes "ออฟเลยไหม ?";
                    				if (select( "^000099เอาเลย^000000.", "ยังก่อน." ) == 2) {
                    					mes "[Joox]";
                    					mes "ข้าเชื่อในการตัดสินใจของเจ้า.";
                    					mes "อยากออฟให้มาหาข้าน่ะ.";
                    					end;
                    				}
                    					specialeffect2 EF_REPAIRWEAPON;
                    					progressbar "0x00ff00",2;
                    					set Zeny,Zeny-.cost;
                    				if (rand(100) < .rate) {
                    					specialeffect2 154;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, Rwing, @card2, @card3, @card4;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^000099ออฟสำเร็จ^000000.";
                    					end;
                    				}
                    				else {
                    					specialeffect2 155;
                    					delitem2 .@part, 1, 1, .@ref, 0, @card1, @card2, @card3, @card4;
                    					getitem2 .@part, 1, 1, .@ref, 0, 0, @card2, @card3, @card4;
                    					equip .@part;
                    					mes "[Joox]";
                    					mes "^009900ออฟไม่สำเร็จ^000000.";
                    					end;
                    				}
                    
case 2:
                    					mes "[Joox]";
                    					mes "ข้าจะสุ่มออฟให้คอสตูมของเจ้า";
                    					mes "ในการสุ่มแต่ละครั้งข้าคิดแค่ ^000099" + .cost + " zeny^000000.";
                    					mes "โดยมีโอกาสติด ^000099" + .rate + " %^000000";
                    					mes "ถ้าออฟล้มเหลวไอเท็มจะไม่หายไป.";
                    					mes "^009900แต่ออฟจะหายแทน^000000.";
                    					end;
                    
case 3:	
                    					mes "[Joox]";
                    					mes "แล้วเจอกันใหม่";
                    					end;
                    			}
                    	
OnInit:	
       .cost = 10000; // ค่าออฟ zeny
       .rate = 70; // โอกาสออฟติด
}